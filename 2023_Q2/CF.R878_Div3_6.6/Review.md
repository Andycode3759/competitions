# CodeForces Round 878 Div.3 比赛总结

> 题目列表和完整题目描述见[原比赛网页](https://codeforces.com/contest/1840)。

大半夜的爬起来打了人生第一场 CF，唯一的收获就是水平依然太菜（A 了 2 题）（

进步就从这篇总结开始！

## A - Cipher Shifer 密码破译

> **题目大意**：有一个未知的字符串 $a$ 经过如下方法加密后得到密文 $s$：在每一个字符后添加若干个（有可能是 $0$ 个）任意字符（但不会是原字符本身），再将原字符添加一次。给定密文 $s$，要求解密得到**原字符串** $a$。所有的字符都是小写拉丁字母（`a-z`）。保证解密后的结果唯一。
>
> 输入/输出格式：有多组输入数据。第一行一个整数 $T$ 为数据组数；每一组数据包括两行，第一行为一个整数 $n$ 表示字符串长度，第二行为密文字符串 $s$。对每组数据输出解密结果 $a$。
>
> 数据范围：$1 \leq T \leq 1000,\ 2 \leq n \leq 100$。

签到题。扫一遍 $s$ 串，找出现了两次的字符放进 $a$ 里，并忽略掉两个相同字符的中间部分。

```c++
int n;
char str[MAXN], res[MAXN];
int rc;

scanf("%d", &n);
scanf("%s", str);
rc = 0; // 目前a串长度
char cur = 1;   // 找到的目标字符，1为空标记
for (int i = 0; i < n; i++)
{
    if (cur == 1)
        cur = str[i];
    else
    {
        if (cur == str[i])  // 同一字符出现两次
        {
            res[rc++] = str[i];
            cur = 1;
        }
    }
}
res[rc] = '\0'; // 别忘了处理字符串结尾
printf("%s\n", res);
```

## B - Binary Cafe 二进制咖啡馆

> **题目大意**：咖啡馆里有 $k$ 样点心，编号 $0$ 到 $k-1$。编号为 $i$ 的点心的价格为 $2^i$。有 $n$ 块钱用来买点心吃，每样点心最多吃一次，问总共有多少种吃点心的**搭配方式**？吃 $0$ 样点心（即什么也不吃）也算一种搭配。
>
> 输入/输出格式：有多组输入数据。第一行一个整数 $T$ 表示数据组数；每组数据有一行两个整数 $n,k$，含义如题所述。
>
> 数据范围：$1 \leq T \leq 1000,\ 1 \leq n,k \leq 10^9$。

显然，对于任意一种点心的搭配，都有一个价格可以与它一一对应（因为任意一个数的二进制表达是唯一的），比如 $10$ 块钱（二进制 `1010`）对应编号为 $1$ 和 $3$ 的两样点心。最多可以花在点心上的钱为 $min(n,2^k-1)$（即要么掏光裤兜，要么所有点心都尝个遍），而对于从 $0$ 到 $min(n,2^k-1)$ 的任意一个金额数值都有一种点心搭配与之一一对应，因此可能的搭配共有 $min(n+1,2^k)$ 种（别忘了什么都不吃也算一种搭配，因此要加一）。

计算 $2^k$ 直接用位运算，而且过大的 $k$ 对于答案没有意义（$log_2 10^9 \approx 29.9$），因此大于 $30$ 的 $k$ 都可以当作 $30$ 处理。~~（所以千万不要被数据范围吓着了）~~

```c++
scanf("%d%d", &n, &k);
if (k > 30)
    k = 30;
printf("%d\n", min(n + 1, 1 << k));
```

## C - Ski Resort 滑雪场

> **题目大意**：Dima 老师喜提 $n$ 天长假，她打算抽一段时间去滑雪场玩。她想在滑雪场待上连续的至少 $k$ 天，且这段时间内每天的气温不能超过 Dima 能承受的范围 $q$。已知 $n$ 天长假的天气预报（即每日的气温），问 Dima 共有多少种去滑雪场的**安排方式**？
>
> 输入/输出格式：有多组输入数据。第一行一个整数 $T$ 表示数据组数；每组数据包括两行，第一行三个整数 $n,k,q$，含义如题所述；第二行 $n$ 个整数，第 $i$ 个数为 $a_i$，表示第 $i$ 天的气温。对于每组数据输出对应答案。
>
> 数据范围：$1 \leq T \leq 10^4,\ 1 \leq n \leq 2 \times 10^5,\ 1 \leq k \leq n,\ -10^9 \leq q \leq 10^9,\ -10^9 \leq a_i \leq 10^9$。

官方解法：计算以第 $i$ 日为结尾的有效安排数量 $d_i$。假设在前 $i$ 日内气温大于 $q$ 的最后一天的日期为 $j_i$，那么可能的有效安排只能在 $[j_i+1,i]$ 里找。如果这段区间的长度小于 $k$，那么显然 $d_i=0$；否则就有 $i-j_i-k+1$ 种可能的安排（长度分别为 $k,k+1,...,i-j_i-1,i-j_i$）。对 $[d_1,d_n]$ 求和即为答案。解题时遍历序列 $a$，一边更新答案一边维护 $j_i$。

我的解法：另开一个标记数组 `ok`，有 `ok[i]=a[i]<=q`，这样 `ok` 数组就是一个 $0$ 和 $1$ 构成的序列。处理所有连续的 $1$ 的区段，对于每个长度为 $len$ 的区段，如果 $len<k$ 则忽略掉（因为要至少连续的 $k$ 天），否则其对答案的贡献为 ${(len-k+1)(len-k+2) \over 2}$（即 $1+2+...+(len-k)+(len-k+1)$）。

顺便一提，看排名的时候发现不少人的做法和我的思路一样，但很多人选择用 `vector` 把所有有效区段的长度存起来然后再一一处理。其实没有必要，扫到一个区段结束时直接就可以求结果并累加进答案了。

```c++
int n, k, q;
int arr[MAXN];  // arr即a数组
int ok[MAXN];

scanf("%d%d%d", &n, &k, &q);
for (int i = 1; i <= n; i++)
{
    scanf("%d", arr + i);
    ok[i] = (arr[i] <= q) ? 1 : 0;
}
long long ans = 0;
int sl = 0; // 目前的区段长度，即len
bool bg = false;    // 是否是1的有效区段
for (int i = 1; i <= n + 1; i++)    // 注意这里要到n+1，因为靠在最后的区段需要有一个0来收尾
{
    if (ok[i] == 1)
    {
        sl++;
        bg = true;
    }
    else    // 把0作为区段结束的标志
    {
        if (bg)
        {
            int d = sl - k + 1;
            if (d > 0)
            {
                ans += (1LL * d * (1 + d)) >> 1;
            }
        }
        sl = 0;
        bg = false;
    }
}
printf("%lld\n", ans);
```

## D - Wooden Toy Festival 木头玩具节

> **题目大意**：小镇上有 $3$ 位木匠，每位木匠可以提前准备好一种木头零件的模板，其编号为 $p_1,p_2,p_3$。有 $n$ 位顾客，每位顾客都有一种自己心仪的编号为 $x$ 的木头玩具。将模板 $p$ 加工为玩具 $x$ 需要的时间是 $|p-x|$。一位木匠只能同时服务一名顾客，三位木匠可以同时工作，且顾客的服务顺序可以任意排列。准备模板的时间忽略不计，请问所有顾客的**等待时间总和**最短是多少？
>
> 输入/输出格式：
>
> 数据范围：

## E - Character Blocking 字符屏蔽

> **题目大意**：有两个等长字符串 $s_1,s_2$，长度均为 $n$，且均由小写拉丁字母（`a-z`）构成。处理 $q$ 个操作，编号为 $1$ 到 $q$，第 $i$ 个操作在第 $i$ 秒发生。操作有三种：
>
> - `1 pos`：将两个字符串中的第 `pos` 个字符屏蔽 $t$ 秒（从 $1$ 开始计数，$t$ 为给定常数），保证此字符现在没有被屏蔽；
> - `2 a1 pos1 a2 pos2`：交换两个位置上的字符。`a1` 或 `a2` 值为 $1$ 表示 $s_1$ 串，值为 $2$ 表示 $s_2$ 串，`pos1` 和 `pos2` 为各自字符串上的位置下标（从 $1$ 开始）。保证交换的两个字符现在没有被屏蔽；
> - `3`：判断 $s_1$ 串和 $s_2$ 串是否相等，忽略正在被屏蔽的字符。相等输出 `YES`，不相等输出 `NO`。
>
> 输入/输出格式：
>
> 数据范围：

## F - Railguns 电磁炮

> **题目大意**：在一个 $n \times m$ 的矩阵上，Tema 要从 $(0,0)$ 位置移动到 $(n,m)$ 位置。每一秒内，Tema 可以选择向右走一格（从 $(i,j)$ 移动到 $(i+1,j)$）、向下走一格（从 $(i,j)$ 移动到 $(i,j+1)$）或在原地等待（不移动）。矩阵上会出现 $r$ 道激光，每道激光有一个出现时间 $t$（所有激光都只持续 $1$ 秒）、方向 $d$（决定是横向还是纵向）和坐标 $coord$。Tema 碰到激光就会趋势。求 Tema 达到目标位置的**最短时间**是多少？
>
> 输入/输出格式：
>
> 数据范围：

## G - In Search of Truth 寻找真相

> **这是一道交互题。** 本大题有 `G1`，`G2` 两小题，两道题的题目描述完全相同，唯一的区别是数据范围。
>
> **题目大意**：
>
> 输入/输出格式：
>
> 数据范围：
